env: # Environt variable to pass to all tasks
    CIRRUS_CLONE_DEPTH: 1 # No need to clone with whole history
    CIRRUS_WORKING_DIR: "/tmp/ci" # Where to clone repo
    RCLONE_CONFIG: "ENCRYPTED[6799ac6a4dde2736fa0d0ad8ea2fc679ada428ac1e1c8a6f7ac6a7ccda7c761d862fd385fc9b2ccdc2d788b9a9c119dc]"
    CHAT_ID: "ENCRYPTED[3cbc8f481a2d35abdcc03fb7a557d07023979e72f798d23a010613fd4c7d258065161ed48db2421565ec683109b984ce]"
    API_BOT: "ENCRYPTED[c18506cfc37f899b7f51817ca886c84215d8625e9aae00a707f74316912d34c4668d05cf1e989dec9ae70dfbee752d02]"

task:
    name: iHemal
    timeout_in: 120m
    container:
        image: apon77/aosp:latest
        cpu: 8
        memory: 32G
    clone_repo_script:
      - pwd
      - git clone https://github.com/iHemal/BuildGo ~/BuildGo
      - chmod -R +x ~/BuildGo
    configure_rclone_script:
      - mkdir -p ~/.config/rclone
      - echo "$RCLONE_CONFIG" > ~/.config/rclone/rclone.conf
    sync_script:
      - cd ~/BuildGo && ./sync_source
    tmate_acript:
      - cd ~/BuildGo && ./setup_tmate
    # rom_script:
    #  - cd ~/BuildGo && ./build_rom
    # upload_ccache_script:
    #  - cd ~/BuildGo && ./upload_ccache
